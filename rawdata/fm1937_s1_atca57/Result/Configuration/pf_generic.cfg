#### rollback on RETRY_DELAY_ON_FAILURE and MAX_ATTEMPT_ON_FAILURE set to 0 concerning DCTPD00558563.03 PhG 
#### reactivate "retry on failure", except for "mysql error 899" with  DCTPD01133319
###############
# Common 
###############

# elements to produce connect string for connection to ndb_mgmd (DbSup and GDMI)
NDB_CONNECT_STRING		="STATION_A:2200,STATION_B:2200"

###############
# GDMP 
###############
GDMP_SERVER_PORT=32002

###############
# GDMI 
###############

# Number of Ndb object that client can manage. A Ndb object is used per Transaction.
# This variable must be greater than TRANSACTION_POOL_SIZE.
# If NDB_POLL_NB is less or equal than TRANSACTION_POOL_SIZE, TRANSACTION_POOL_SIZE will
# automatically be decreased to NDB_POLL_NB - 1
# at least one transaction is needed to access backdoor.
# default value (if not setted) : 128
NDB_POLL_NB			= 128

# If setted to positive value, Gdmi Transactions objects will be reused rather than
# deleted, which increase performance and resource consumption.
# If not setted (or setted to 0), Gdmi transactions are not reused.
# must be less or equal than NDB_POLL_NB - 1
# If equal or greater that NDB_POLL_NB, will be setted automatically to NDB_POLL_NB - 1
TRANSACTION_POOL_SIZE           = 16
                                                                                                                                       
# When a db node fails, GDMI can replay the transaction.
# This variable indicates how many time GDMI will try to replay transaction, and
# RETRY_DELAY_ON_FAILURE indicates the waiting time between each retry (in milliseconds).
# default value for MAX_ATTEMPT_ON_FAILURE is 10 (if not setted), default value for
# RETRY_DELAY_ON_FAILURE is 0, and default value for RETRY_ON_LOCK is 0.
# DCTPD01133319 : reactivate, except for "mysql error 899"
MAX_ATTEMPT_ON_FAILURE          = 2
                                                                                                                                       
# see MAX_ATTEMPT_ON_FAILURE
RETRY_DELAY_ON_FAILURE          = 1
                                                                                                                                       
# max number of retry when a lock error is received from database.
RETRY_ON_LOCK                   = 0

# GDMI_EVENTS_MAX_ATTEMPT_ON_ERROR gives the number of retry when creating or activating a mysql
# event in error case. Default value is 5.GDMI_EVENTS_RETRY_DELAY_ON_ERROR delay (milliseconds) will
# be used between each try. Default value is 500 ms.
GDMI_EVENTS_MAX_ATTEMPT_ON_ERROR = 10
GDMI_EVENTS_RETRY_DELAY_ON_ERROR = 500

# number of connect attempts
CONNECT_RETRY_NUMBER = 10
# delay between connectattempts
CONNECT_RETRY_DELAY  = 10000    

#-------------------------------------------------------------------------------#
#                               Default access mode                             #
#-------------------------------------------------------------------------------#
# defines which access is allowed to the dabase. Possible values are :
# NO_ACCESS (default value if it is not setted in configuration file)
# READ_ONLY
# READ_WRITE
#DEFAULT_DB_ACCESS_MODE       = READ_WRITE
#
# only the applications that do not have RW access to DB when status is RW_NO_TRAFFIC, 
# have to change this parameter in its "application_pf_generic" file to "true"
MapNoTrafficToKo = false
                                                                                                                       
#-------------------------------------------------------------------------------#
#                               Local data refresh using event                  #
#-------------------------------------------------------------------------------#
# indicates if local data are used by process or not.
# Local data are used if value is YES or yes, else local data are not used.
# default value : YES
GDMI_ALLOW_LOCAL_DATA = NO
REFRESH_LOCAL_DATA_BY_EVENT = 1
                                                                                                                       
#-------------------------------------------------------------------------------#
#                               Shared data refresh using event                 #
#-------------------------------------------------------------------------------#
# When this variable is setted to YES (or yes), an EventThread (thread where
# Event applicative callback are called) is created per DbClient, even if several
# DbClient are connected to the same database. Else, a unique thread is created
# for this database, and will be shared for all Events of all DbClient.
# in this case, calling startEventSupervision for one DbClient means that event
# supervision is started for all DbClient connected (or that will connect) to this
# database
GDMI_USE_EVENT_THREAD_PER_DBCLIENT = YES

#-------------------------------------------------------------------------------#
#                               Number of transactions per Ndb                  #
#-------------------------------------------------------------------------------#
# indicates how many transactions (mysql) can be used simultaneously per Ndb
# object.
GDMI_TRANSACTIONS_PER_NDB       = 3

#-------------------------------------------------------------------------------#
# 				Default lock policy                             #
#-------------------------------------------------------------------------------#
# Indicates the lock taken when entries are readen if no lock information is given.
# This lock does not apply for getSubtree methods.
# possible values : NoLock, ReadLock, WriteLock (see GDMI API doc for more details).
# if the variable is not found in configuration file, ReadLock value is used.
GDMI_DEFAULT_LOCK_MODE = ReadLock

#-------------------------------------------------------------------------------#
#                               Timeout connection to cluster                   #
#-------------------------------------------------------------------------------#
# Indicates the number of seconds to wait until database cluster allows connection.
# Default value : 30
GDMI_CLUSTER_CONNECTION_TIMEOUT = 30
                                                                                                                       
#-------------------------------------------------------------------------------#
# 				Thread priorities                               #
#-------------------------------------------------------------------------------#
# !!!!!! Be care, do not tune these priorities without expertise !!!!!!
FWK_BASIC_SERVICE_PRIORITY = 33

#------------------------------------------------------------------------------#
#                               Thread policy                                  #
#------------------------------------------------------------------------------#
### Timesharing scheduling
#  used 3
#  In Timesharing policy the sheduler is able to change the initial priority of the thread
### First-in first-out scheduling (FIFO) 
#  used 1
#  priority can't be modified by the sheduler but no quantum is used
#  each thread runs to completion or until it voluntarily yields or is preempted by a higher-priority thread 
### Round-robin scheduling 
#  used 2
#  priority can't be modified by the sheduler but quantum is used
#  when the thread finishes its quantum, it goes to the end of the process list
FWK_BASIC_SERVICE_POLICY = 3


#------------------------------------------------------------------------------#
#                    parameters for the generic Error                          #
#------------------------------------------------------------------------------#
MAX_NUMBER_OF_SEVER_ERRORS  	= 2             # the default value = 3
LIFETIME_OF_SEVER_ERRORS    	= 60            # the default value = 3600

# others configuration data can be given here :

#
# DHAFW_MAX_DATA_SEGMENT_SIZE
# FWK_PROCESS_PRIORITY
# FWK_MLOCKALL (default=false)
FWK_MLOCKALL = true

# if set, fwk will call chdir (to set the running directory, where core file will be located)
# WORKING_DIRECTORY

#-------------------------------------------------------------------------------#
# 				Debug options                                   #
#-------------------------------------------------------------------------------#

#------------------------------------------------------------------------------#
#                           backdoor  debug                                    #
#------------------------------------------------------------------------------#
#FWK_CONTROL_PORT     = 40222
MAPPER_CONTROL_PORT  = 40333
# Control the accesses to the backdoor from foreign hosts
# 0 => Control disabled ; 1 => Control enabled (default value if not present)
ACCESS_CONTROL_ACTIVATED = 1

#DEBUG_ATTACH = 0
                                                                                                                                  
#------------------------------------------------------------------------------#
#                        backdoor log file name                                #
#------------------------------------------------------------------------------#
#
BCKDLOG_FILE            = "INT,0xff:/var/local/nectar/out/backdoor.log"
BCKDLOG_ENABLE          = YES
#

#------------------------------------------------------------------------------#
#                        trace file name                                       #
#------------------------------------------------------------------------------#

# safe using of trace options : always declare a real trace file, and sets
# TRACE_ENABLE to NO if you don't want traces.

# TRACE_FILE : syntax is "<LEVEL>,SubLevel:filename"
# LEVEL can be MAJ,MID,MIN,INT (for MAJOR, MIDDLE, MINOR and INTERNAL traces)
# SubLevel is a bit mask. Possible values are :
#	SUB_COMM    = 0x01
#	SUB_SYSTEM  = 0x02
#	SUB_MEMBER  = 0x04
#	SUB_DEBUG   = 0x08
#	SUB_USER1   = 0x10
#	SUB_USER2   = 0x20
#	SUB_USER3   = 0x40
#	SUB_FILTER  = 0x80

# If you want to retrieve traces after a crash, you can simply use a filename containing 'trace'
# and use /var/local/nectar/log directory.
TRACE_FILE 		= "INT,0xfe:/var/local/nectar/log/gdmi.trace"

# traces are really active only if TRACE_ENABLE variable is setted to YES
TRACE_ENABLE 		= NO

# TRACE_FILTER indicates which filtered traces are allowed
#TRACE_FILTER		= "mapper,gdmi"

# TRACE_HEADER tunes header fields. Values are :
#      1 : time is part of header
#      2 : serviceName is part of header
#      4 : domain is part of header
#      8 : level is part of header
#      16 : sublevel is part of header
# example : 3 means that time and service name (thread id) are part of header.

#TRACE_HEADER		= 3


# check for buffer size when getAttribute/getValues is called
# check is done when GDMI have been compiled with -DCHECK_BUFFER_SIZE flag
# and if this variable is greater than 0 (0 : no check)
CHECK_BUFFER_SIZE = 0

# if "true", an exception will be thrown when using bad set accessor for bitfield attributes.
# default : false (no check)
# accessor to be used to set bitfields attribute : Int64 or Uint64.
#ErrorIfBadAccessorUserForBitField = false

# if greater than 0, created transactions are stored in a list, and can be
# listed using trslist backdoor command.
GDMI_STORE_TRANSACTIONS = 1

# if setted to YES, GDMI will look at commit and rollback execution time
# and output a trace (mapper trace) if elapsed time is greater than
# GDMI_DB_TIME_TRACER_THRESHOLD value.
# default (if net setted) is NO.
#GDMI_USE_DB_TIME_TRACER = NO

# see GDMI_USE_DB_TIME_TRACER
# indicated in milliseconds.
# default (if not setted) is 2000
#GDMI_DB_TIME_TRACER_THRESHOLD = 2000

# Number of attempts and delay between these when a client try to connect to the cluster

CONNECT_RETRY_NUMBER = 30
CONNECT_RETRY_DELAY      = 10000

DHAFW_MAX_PROCESS_SIZE_MBYTES = 500
#------------------------------------------------------------------------------#
#                        ReadAndTrace                                          #
#------------------------------------------------------------------------------#
RAT_TRACE_FILE		= "INT,0xe:/var/local/nectar/log/rat.trace"

#------------------------------------------------------------------------------#
#                        QUERY                                                #
#------------------------------------------------------------------------------#
#Set NDBFILTER_IN_USE to 1 to process LDAP search filter  with ndb
#default is 0
NDBFILTER_IN_USE = 1
FULL_LDAP_FILTER_IN_USE = 1 

#IXS_IMPLEM_TYPE = "TIME_IS"
#IXS_MULTICAST_IN_USE = 1
IXS_POOL_ALLOCATOR = 1
IXS_MULTICAST_PORT = 40404
IXS_MULTICAST_GROUP = 224.0.0.10
IXS_MULTICAST_INTERFACE = "eth0"
IXS_SPARE_MULTICAST_INTERFACE = "eth1"
####
IXS_N_ELEMENT = 5000
IXS_N_PAGE = 50
IXS_N_PAGE_SIZE = 50000
IXS_MAX_KEY_SIZE = 30
####
IXS_CLEANING_PERIOD = 500000
UseClonePool = true


#------------------------------------------------------------------------------#
#                        GDMP                                                   #
#------------------------------------------------------------------------------#
DisableGlobalDataProfile = "true" 

#------------------------------------------------------------------------------#
#                        BUFFER TCP                                                   #
#------------------------------------------------------------------------------#
GateTcpNoDelay = true
# GateSndBuf = 128000
# GateRcvBuf = 128000


#------------------------------------------------------------------------------#
#                        Allowed rank for client gdmps
#------------------------------------------------------------------------------#
AllowedServerRanks = 3,4,5,6,7,8,9,10,11,12,13,14,15,16

#------------------------------------------------------------------------------#
#                        Cpu's Assigned to ReplyThreads (mask)
#------------------------------------------------------------------------------#

#ReplyThreadsCore = 3

#------------------------------------------------------------------------------#
#                        Cpu's Assigned to Gate Threads (mask)
#------------------------------------------------------------------------------#

#GdmiThreadsCore = 1

#------------------------------------------------------------------------------#
#                          Time before print trace (900 s)
#------------------------------------------------------------------------------#
LongLockTreshold = 900000
#------------------------------------------------------------------------------#
#                         Select the IndexServer allocation time
#                         0 : Allocation during framework init
#                         1 : Allocation at the first Index Server call
#------------------------------------------------------------------------------#
IXS_INIT_TIME = 0
